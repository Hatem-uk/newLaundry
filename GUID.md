# 🧺 دليل المستخدم - نظام الخدمات اللوجستية

## 📋 جدول المحتويات
1. [نظرة عامة على النظام](#نظرة-عامة-على-النظام)
2. [المستخدمون والأدوار](#المستخدمون-والأدوار)
3. [الميزات الأساسية](#الميزات-الأساسية)
4. [دليل الاستخدام](#دليل-الاستخدام)
5. [نظام العملات](#نظام-العملات)
6. [إدارة الخدمات](#إدارة-الخدمات)
7. [إدارة الطلبات](#إدارة-الطلبات)
8. [استكشاف الأخطاء](#استكشاف-الأخطاء)

---

## 🎯 نظرة عامة على النظام

نظام الخدمات اللوجستية هو منصة متكاملة تتيح للعملاء طلب خدمات الغسيل والكي من المغاسل والعملاء، مع نظام عملات افتراضية وإدارة ذكية للمواقع.

### المميزات الرئيسية:
- 🌍 **نظام مواقع متقدم** مع دعم المدن السعودية
- 💰 **نظام عملات افتراضية** للدفع
- 📱 **واجهة API كاملة** للهواتف والتطبيقات
- 🚚 **خدمات توصيل واستلام** من المنزل
- 📊 **إحصائيات وإدارة متقدمة**

---

## 👥 المستخدمون والأدوار

### 1. **المدير (Admin)**
- إدارة جميع الخدمات والمستخدمين
- الموافقة على الخدمات الجديدة
- مراقبة النظام والإحصائيات

### 2. **المغسلة (Laundry)**
- إضافة وإدارة الخدمات
- استقبال وإدارة الطلبات
- إدارة العمال والمتطلبات

### 3. **العميل (Customer)**
- طلب الخدمات
- إدارة الحساب والعملات
- تتبع الطلبات

### 4. **الوكيل (Agent)**
- تقديم خدمات إضافية
- العمل مع المغاسل
- إدارة المناطق الخدمية

---

## ⭐ الميزات الأساسية

### 🌍 نظام المواقع
- **المدن المدعومة**: جميع المدن السعودية الرئيسية
- **حساب المسافات**: خوارزمية ذكية لحساب المسافات
- **فلترة جغرافية**: عرض الخدمات حسب القرب

### 💰 نظام العملات
- **شراء الحزم**: حزم عملات بأسعار مختلفة
- **هدايا**: إرسال عملات كهدية للآخرين
- **دفع الخدمات**: استخدام العملات لشراء الخدمات

### 📱 واجهة API
- **RESTful API**: تصميم حديث وسهل الاستخدام
- **مصادقة آمنة**: Laravel Sanctum
- **صلاحيات متقدمة**: نظام أدوار مرن

---

## 📖 دليل الاستخدام

### 🔐 التسجيل والدخول

#### إنشاء حساب جديد:
```bash
POST /api/auth/register
{
    "name": "اسم المستخدم",
    "email": "user@example.com",
    "password": "كلمة المرور",
    "password_confirmation": "تأكيد كلمة المرور",
    "role": "customer",
    "phone": "+966500000000",
    "city_id": 1,
    "address": "العنوان"
}
```

#### تسجيل الدخول:
```bash
POST /api/auth/login
{
    "email": "user@example.com",
    "password": "كلمة المرور"
}
```

### 🏢 إدارة المغسلة

#### تحديث الملف الشخصي:
```bash
PUT /api/laundry/profile
{
    "name": "اسم المغسلة الجديد",
    "address": "العنوان الجديد",
    "phone": "رقم الهاتف الجديد",
    "city_id": 2,
    "working_hours": {
        "monday": "08:00-18:00",
        "tuesday": "08:00-18:00"
    },
    "delivery_available": true,
    "pickup_available": true
}
```

#### تغيير الحالة:
```bash
PUT /api/laundry/status
{
    "status": "online" // online, offline, maintenance
}
```

### 🛍️ إدارة الخدمات

#### إضافة خدمة جديدة:
```bash
POST /api/services
{
    "name": "غسيل عادي",
    "description": "خدمة غسيل عادية للملابس",
    "coin_cost": 100,
    "price": null,
    "quantity": 50,
    "type": "washing"
}
```

#### تحديث خدمة:
```bash
PUT /api/services/{id}
{
    "name": "غسيل عادي محدث",
    "coin_cost": 120,
    "quantity": 60
}
```

### 💰 نظام العملات

#### شراء حزمة عملات:
```bash
POST /api/packages/purchase
{
    "package_id": 1,
    "payment_method": "online"
}
```

#### إرسال هدية:
```bash
POST /api/packages/gift
{
    "package_id": 1,
    "recipient_email": "friend@example.com",
    "gift_message": "أتمنى لك يوم سعيد!"
}
```

### 🛒 طلب الخدمات

#### شراء خدمة:
```bash
POST /api/orders/purchase-service
{
    "service_id": 1,
    "quantity": 2
}
```

#### إلغاء طلب:
```bash
POST /api/orders/{id}/cancel
```

---

## 💰 نظام العملات

### الحزم المتاحة:
1. **Starter Pack**: 500 عملة - 50 ريال
2. **Premium Pack**: 1000 عملة - 90 ريال  
3. **Bulk Pack**: 2000 عملة - 170 ريال
4. **Special Pack**: 5000 عملة - 400 ريال

### كيفية الحصول على العملات:
- **شراء مباشر**: شراء الحزم من النظام
- **هدايا**: استقبال عملات من مستخدمين آخرين
- **مكافآت**: من النظام (مستقبلاً)

### استخدام العملات:
- **دفع الخدمات**: شراء خدمات المغاسل
- **تحويل**: إرسال للآخرين
- **توفير**: حفظ للاستخدام المستقبلي

---

## 🛠️ إدارة الخدمات

### أنواع الخدمات:
- **غسيل (Washing)**: غسيل الملابس
- **كي (Ironing)**: كي الملابس
- **تنظيف جاف (Dry Cleaning)**: تنظيف خاص
- **إمدادات الوكيل (Agent Supply)**: خدمات الوكيلين
- **خدمات المغسلة (Laundry Service)**: خدمات عامة

### حالات الخدمة:
- **معلق (Pending)**: في انتظار الموافقة
- **نشط (Active)**: متاح للطلب
- **غير نشط (Inactive)**: غير متاح
- **مرفوض (Rejected)**: مرفوض من المدير

---

## 📋 إدارة الطلبات

### حالات الطلب:
1. **معلق (Pending)**: تم الطلب، في انتظار التأكيد
2. **قيد المعالجة (In Process)**: قيد التنفيذ
3. **مكتمل (Completed)**: تم الانتهاء
4. **ملغي (Canceled)**: تم الإلغاء

### قواعد الإلغاء:
- **العميل**: يمكنه الإلغاء فقط في حالة "معلق"
- **المغسلة**: يمكنها تغيير الحالة للأمام فقط
- **استرداد العملات**: تلقائي عند الإلغاء

---

## ⭐ نظام التقييمات

### كيفية التقييم:
1. **بعد إكمال الطلب**: يمكن للعميل تقييم المغسلة
2. **نظام النقاط**: من 1 إلى 5 نجوم
3. **التعليقات**: إضافة تعليق شخصي (اختياري)
4. **نوع الخدمة**: تحديد نوع الخدمة المقيمة

### قواعد التقييم:
- **تقييم واحد**: لكل طلب، تقييم واحد فقط
- **التحديث**: يمكن تحديث التقييم خلال 24 ساعة
- **الحذف**: يمكن حذف التقييم خلال 24 ساعة
- **التحقق**: النظام يتحقق من صحة الطلب

### إحصائيات التقييم:
- **متوسط التقييم**: حساب تلقائي للمغسلة
- **عدد التقييمات**: إجمالي التقييمات المستلمة
- **توزيع النقاط**: نسبة كل مستوى تقييم
- **التقييمات الحديثة**: آخر 5 تقييمات

### فوائد التقييم:
- **تحسين الجودة**: المغاسل تطور خدماتها
- **ثقة العملاء**: العملاء يختارون الأفضل
- **شفافية النظام**: تقييمات حقيقية وموثوقة
- **تطوير الخدمة**: بناء على آراء العملاء

---

## 🔧 استكشاف الأخطاء

### مشاكل شائعة:

#### 1. خطأ في المصادقة:
```
HTTP 401 Unauthorized
```
**الحل**: تأكد من صحة التوكن أو قم بتسجيل الدخول مرة أخرى

#### 2. عملات غير كافية:
```
HTTP 422 Validation Error
"message": "Insufficient coins"
```
**الحل**: اشترِ المزيد من العملات أو اختر خدمة أرخص

#### 3. خدمة غير متوفرة:
```
HTTP 404 Not Found
"message": "Service not found"
```
**الحل**: تأكد من وجود الخدمة وأنها نشطة

#### 4. خطأ في المدينة:
```
HTTP 422 Validation Error
"message": "City not set"
```
**الحل**: قم بتحديث ملفك الشخصي مع تحديد المدينة

### نصائح للأداء:
- استخدم الفلاتر لتقليل البيانات المستلمة
- احفظ التوكن محلياً لتجنب إعادة تسجيل الدخول
- استخدم pagination للقوائم الطويلة

---

## 📞 الدعم والمساعدة

### معلومات الاتصال:
- **البريد الإلكتروني**: support@laundry-system.com
- **الهاتف**: +966-11-123-4567
- **ساعات العمل**: الأحد - الخميس (8:00 ص - 6:00 م)

### الموارد الإضافية:
- [API Documentation](API_DOCUMENTATION.md)
- [Postman Collection](Laravel_Service_System_Postman_Collection.json)
- [Video Tutorials](https://youtube.com/laundry-system)

---

## 📝 ملاحظات مهمة

1. **الأمان**: لا تشارك توكن المصادقة مع أي شخص
2. **النسخ الاحتياطي**: احتفظ بنسخة من بياناتك المهمة
3. **التحديثات**: تأكد من تحديث التطبيق بانتظام
4. **الشروط**: اقرأ شروط الاستخدام قبل الاستخدام

---

*آخر تحديث: ديسمبر 2024*
*الإصدار: 2.0*
